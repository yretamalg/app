# RifApp Plus - Configuración Principal
# Este archivo maneja el routing de la aplicación

RewriteEngine On

# Prevenir navegación de directorios
Options -Indexes

# Bloquear acceso directo a archivos sensibles
<FilesMatch "\.(env|log|sql|md)$">
    Order Deny,Allow
    Deny from all
</FilesMatch>

# Permitir acceso directo a public/ e install/
RewriteCond %{REQUEST_URI} ^/app/(public|install)/
RewriteRule ^(.*)$ - [L]

# Permitir acceso a archivos estáticos existentes
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^(.*)$ - [L]

# Enviar todo lo demás al index.php raíz para procesamiento
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php [L,QSA]

# Headers de seguridad básicos
<IfModule mod_headers.c>
    Header always set X-Content-Type-Options nosniff
    Header always set X-Frame-Options SAMEORIGIN
    Header always set X-XSS-Protection "1; mode=block"
</IfModule>
